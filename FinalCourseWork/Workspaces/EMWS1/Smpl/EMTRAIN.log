*------------------------------------------------------------*
* Training Log
Date:                30 November 2021
Time:                13:03:13
*------------------------------------------------------------*
11448  proc freq data=EMWS1.Smpl_VariableSet noprint;
11449  table ROLE*LEVEL/out=WORK.SmplMETA;
11450  run;

NOTE: There were 18 observations read from the data set EMWS1.SMPL_VARIABLESET.
NOTE: The data set WORK.SMPLMETA has 5 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.05 seconds
      cpu time            0.01 seconds
      

11451  proc print data=WORK.SmplMETA label noobs;
11452  var ROLE LEVEL COUNT;
11453  label ROLE = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel, NOQUOTE))" LEVEL = "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))" COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel, NOQUOTE))";
11454  title9 ' ';
11455  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_varSummary_title  , NOQUOTE))";
11456  run;

NOTE: There were 5 observations read from the data set WORK.SMPLMETA.
NOTE: The PROCEDURE PRINT printed page 1.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
      

11457  title10;

11464  *------------------------------------------------------------*;
11465  * Smpl: Determine number of observations;
11466  *------------------------------------------------------------*;
11467  proc sql;
11468  reset noprint;
11469  select count(*) into :_tmpa from EMWS1.Filter_TRAIN
11470  ;
NOTE: View EMWS1.FILTER_TRAIN.VIEW used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
      
NOTE: There were 4000 observations read from the data set EMWS1.PART_TRAIN.
11471  quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.07 seconds
      cpu time            0.07 seconds
      

NOTE: View EMWS1.FILTER_TRAIN.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      
11472  *------------------------------------------------------------*;
11473  * Smpl: Retrieving stratification variable(s) levels;
11474  *------------------------------------------------------------*;
11475  proc freq data=EMWS1.Filter_TRAIN noprint;
11476  format
11477  ORGYN BEST12.0
11478  ;
11479  table
11480  ORGYN
11481  /out=EMWS1.Smpl_STRATASUMMARY (rename=(count=_npop_ percent=_pctpop_)) missing;
11482  run;

NOTE: View EMWS1.FILTER_TRAIN.VIEW used (Total process time):
      real time           0.06 seconds
      cpu time            0.04 seconds
      
NOTE: There were 4000 observations read from the data set EMWS1.PART_TRAIN.
NOTE: There were 2964 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: The data set EMWS1.SMPL_STRATASUMMARY has 2 observations and 3 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.09 seconds
      cpu time            0.04 seconds
      

11483  quit;

11484  proc sort data=EMWS1.Smpl_STRATASUMMARY out=EMWS1.Smpl_STRATASUMMARY;
11485  by descending _npop_;
11486  run;

NOTE: There were 2 observations read from the data set EMWS1.SMPL_STRATASUMMARY.
NOTE: The data set EMWS1.SMPL_STRATASUMMARY has 2 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.05 seconds
      cpu time            0.01 seconds
      

11487  quit;

11488  data EMWS1.Smpl_STRATASUMMARY;
11489  set EMWS1.Smpl_STRATASUMMARY;
11490  label _nsamp_='Sample Size';
11491  label _pctsmp_='Sample Proportion';
11492  label _npop_ ='Stratum Size';
11493  label _pctpop_ ='Stratum Proportion';
11494  _nsamp_ = .;
11495  _pctsmp_ = .;
11496  run;

NOTE: There were 2 observations read from the data set EMWS1.SMPL_STRATASUMMARY.
NOTE: The data set EMWS1.SMPL_STRATASUMMARY has 2 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.05 seconds
      cpu time            0.03 seconds
      

11497  quit;

11498  *------------------------------------------------------------*;
11499  * Smpl: Create stratified sample;
11500  *------------------------------------------------------------*;
11501  data EMWS1.Smpl_DATA(label="Sample of EMWS1.Filter_TRAIN.");
11502  set EMWS1.Filter_TRAIN;
11503  retain _seed_ 12345;
11504  label _dataobs_ = "%sysfunc(sasmsg(sashelp.dmine, sample_dataobs_vlabel, NOQUOTE))";
11505  drop _seed_ _genvalue_;
11506  call ranuni(_seed_, _genvalue_);
11507  drop
11508  _n000001 _s000001
11509  _n000002 _s000002
11510  ;
11511  length _Sformat1 $200;
11512  drop _Sformat1;
11513  _Sformat1 = strip(put(ORGYN, BEST12.0));
11514  if
11515  _Sformat1 = '0'
11516  then do;
11517  _n000001 + 1;
11518  if _s000001 < 2198 then do;
11519  if _genvalue_*(2198 - _n000001) <=(2198 - _s000001) then do;
11520  _s000001 + 1;
11521  _dataobs_=_N_;
11522  output;
11523  end;
11524  end;
11525  end;
11526  else if
11527  _Sformat1 = '1'
11528  then do;
11529  _n000002 + 1;
11530  if _s000002 < 766 then do;
11531  if _genvalue_*(766 - _n000002) <=(766 - _s000002) then do;
11532  _s000002 + 1;
11533  _dataobs_=_N_;
11534  output;
11535  end;
11536  end;
11537  end;
11538  run;

NOTE: View EMWS1.FILTER_TRAIN.VIEW used (Total process time):
      real time           0.06 seconds
      cpu time            0.03 seconds
      
NOTE: There were 4000 observations read from the data set EMWS1.PART_TRAIN.
NOTE: There were 2964 observations read from the data set EMWS1.FILTER_TRAIN.
NOTE: The data set EMWS1.SMPL_DATA has 2964 observations and 18 variables.
NOTE: DATA statement used (Total process time):
      real time           0.09 seconds
      cpu time            0.03 seconds
      

11539  data _tempNobs;
11540  length Type $8 Table $32 Nobs 8;
11541  label type= "%sysfunc(sasmsg(sashelp.dmine, meta_type_vlabel,    NOQUOTE))" table = "%sysfunc(sasmsg(sashelp.dmine, meta_dataset_vlabel, NOQUOTE))" nobs = "%sysfunc(sasmsg(sashelp.dmine,  rpt_numObs_vlabel,   NOQUOTE))";
11542  type='DATA';
11543  table="EMWS1.Filter_TRAIN";
11544  Nobs=2964;
11545  output;
11546  type='SAMPLE';
11547  table="EMWS1.Smpl_DATA";
11548  Nobs=2964;
11549  output;
11550  run;

NOTE: The data set WORK._TEMPNOBS has 2 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
      

11551  %let _cn = %sysfunc(getoption(CENTER));
11552  %let _nb = %sysfunc(getoption(NUMBER));
11553  options nonumber nocenter;
11554  proc print data=_tempNobs noobs label;
11555  title9 ' ';
11556  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_samplingSummary_title, NOQUOTE))";
11557  run;

NOTE: There were 2 observations read from the data set WORK._TEMPNOBS.
NOTE: The PROCEDURE PRINT printed page 2.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

11558  title10;
11559  options &_cn &_nb;
11560  run;

11561  quit;

